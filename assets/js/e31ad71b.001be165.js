"use strict";(self.webpackChunkbrooder=self.webpackChunkbrooder||[]).push([[5063],{4474:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"workflows/shared/transactions","title":"Transaction History","description":"This workflow allows a user, either a Customer or a Provider, to retrieve a paginated list of their financial transactions. These transactions reflect all movements of funds within their Wallet, often resulting from actions in the Order Management workflow.","source":"@site/docs/workflows/shared/transactions.md","sourceDirName":"workflows/shared","slug":"/workflows/shared/transactions","permalink":"/brooder-doc/docs/workflows/shared/transactions","draft":false,"unlisted":false,"editUrl":"https://github.com/khalidgxg/brooder/tree/main/docs/workflows/shared/transactions.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Skill Management (Provider)","permalink":"/brooder-doc/docs/workflows/shared/skills-management"},"next":{"title":"Wallet Management","permalink":"/brooder-doc/docs/workflows/shared/wallets"}}');var t=r(4848),i=r(8453);const o={sidebar_position:3},a="Transaction History",d={},c=[{value:"Endpoint",id:"endpoint",level:2},{value:"List Transactions",id:"list-transactions",level:3},{value:"Process Flow",id:"process-flow",level:2},{value:"Query Parameters",id:"query-parameters",level:2},{value:"Response Body",id:"response-body",level:2},{value:"Success Response (<code>200 OK</code>)",id:"success-response-200-ok",level:3},{value:"Code Highlights &amp; Key Concepts",id:"code-highlights--key-concepts",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"transaction-history",children:"Transaction History"})}),"\n",(0,t.jsxs)(n.p,{children:["This workflow allows a user, either a Customer or a Provider, to retrieve a paginated list of their financial transactions. These transactions reflect all movements of funds within their ",(0,t.jsx)(n.a,{href:"./wallets",children:"Wallet"}),", often resulting from actions in the ",(0,t.jsx)(n.a,{href:"./orders-management",children:"Order Management"})," workflow."]}),"\n",(0,t.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,t.jsx)(n.h3,{id:"list-transactions",children:"List Transactions"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint fetches the transaction history for the authenticated user."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Endpoint:"})," ",(0,t.jsx)(n.code,{children:"GET /api/v1/transactions"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authorization:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Bearer Token (Customer)"}),"\n",(0,t.jsx)(n.li,{children:"Bearer Token (Provider)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Action:"})," ",(0,t.jsx)(n.code,{children:"Shared\\Transactions\\IndexTransactionController"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"process-flow",children:"Process Flow"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TD\r\n    A["Start"] --\x3e B["Authenticated User Requests Transactions"];\r\n    B --\x3e C{"GET /api/v1/transactions"};\r\n    C --\x3e D["Instantiate IndexTransactionAction"];\r\n    D --\x3e E["Get Authenticated User (Customer/Provider)"];\r\n    E --\x3e F["Fetch Paginated List of Transactions for the User"];\r\n    F --\x3e G["Return Paginated Transaction Resource"];\r\n    G --\x3e H["End"];'}),"\n",(0,t.jsx)(n.h2,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"page"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"integer"})}),(0,t.jsx)(n.td,{children:"The page number to retrieve."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"1"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"records_per_page"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"integer"})}),(0,t.jsx)(n.td,{children:"The number of transactions to return per page."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"15"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"response-body",children:"Response Body"}),"\n",(0,t.jsx)(n.p,{children:"The response is a standard paginated resource containing a list of transactions."}),"\n",(0,t.jsxs)(n.h3,{id:"success-response-200-ok",children:["Success Response (",(0,t.jsx)(n.code,{children:"200 OK"}),")"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\r\n    "status": "success",\r\n    "message": "Data has been retrieved successfully.",\r\n    "data": [\r\n        {\r\n            "id": "txn_12345",\r\n            "type": "deposit",\r\n            "amount": "100.00",\r\n            "currency": "SAR",\r\n            "description": "Wallet deposit",\r\n            "created_at": "2023-10-27T10:00:00Z"\r\n        },\r\n        {\r\n            "id": "txn_67890",\r\n            "type": "payment",\r\n            "amount": "-50.00",\r\n            "currency": "SAR",\r\n            "description": "Payment for Order #123",\r\n            "created_at": "2023-10-26T15:30:00Z"\r\n        }\r\n    ],\r\n    "links": {\r\n        "first": "http://localhost/api/v1/transactions?page=1",\r\n        "last": "http://localhost/api/v1/transactions?page=5",\r\n        "prev": null,\r\n        "next": "http://localhost/api/v1/transactions?page=2"\r\n    },\r\n    "meta": {\r\n        "current_page": 1,\r\n        "from": 1,\r\n        "last_page": 5,\r\n        "path": "http://localhost/api/v1/transactions",\r\n        "per_page": 2,\r\n        "to": 2,\r\n        "total": 10\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"code-highlights--key-concepts",children:"Code Highlights & Key Concepts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Polymorphic Relationship:"})," The system likely uses a polymorphic relationship on the ",(0,t.jsx)(n.code,{children:"Transaction"})," model. This allows a single ",(0,t.jsx)(n.code,{children:"transactions"})," table to store records for different types of models (in this case, ",(0,t.jsx)(n.code,{children:"Customer"})," and ",(0,t.jsx)(n.code,{children:"Provider"}),") by having ",(0,t.jsx)(n.code,{children:"transactable_id"})," and ",(0,t.jsx)(n.code,{children:"transactable_type"})," columns."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simple & Reusable:"})," The ",(0,t.jsx)(n.code,{children:"IndexTransactionAction"})," is very simple. It retrieves the authenticated user, which can be either a ",(0,t.jsx)(n.code,{children:"Customer"})," or ",(0,t.jsx)(n.code,{children:"Provider"}),", and then calls the ",(0,t.jsx)(n.code,{children:"transactions()"})," relationship on that user model. This makes the code clean, reusable, and easy to understand."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Standard Pagination:"})," The endpoint uses Laravel's standard ",(0,t.jsx)(n.code,{children:"paginate()"})," method, which automatically handles the pagination logic and provides a consistent, well-structured JSON response with ",(0,t.jsx)(n.code,{children:"data"}),", ",(0,t.jsx)(n.code,{children:"links"}),", and ",(0,t.jsx)(n.code,{children:"meta"})," objects. This is a best practice for API design."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This concludes the documentation for the shared Transaction History workflow."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var s=r(6540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);