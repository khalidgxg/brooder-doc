"use strict";(self.webpackChunkbrooder=self.webpackChunkbrooder||[]).push([[3378],{2745:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"workflows/support/general","title":"General Support","description":"This document covers miscellaneous support endpoints for downloading forms, retrieving lists of nationalities, and managing user language preferences.","source":"@site/docs/workflows/support/general.md","sourceDirName":"workflows/support","slug":"/workflows/support/general","permalink":"/brooder-doc/docs/workflows/support/general","draft":false,"unlisted":false,"editUrl":"https://github.com/khalidgxg/brooder/tree/main/docs/workflows/support/general.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Account Management","permalink":"/brooder-doc/docs/workflows/auth/account-management"},"next":{"title":"Locations","permalink":"/brooder-doc/docs/workflows/support/locations"}}');var i=s(4848),t=s(8453);const o={},a="General Support",l={},d=[{value:"Flow Diagrams",id:"flow-diagrams",level:2},{value:"Download Authorization Form",id:"download-authorization-form",level:3},{value:"Get Nationalities",id:"get-nationalities",level:3},{value:"Set Language Preference",id:"set-language-preference",level:3},{value:"1. Download Authorization Form",id:"1-download-authorization-form",level:2},{value:"Success Response (200 OK)",id:"success-response-200-ok",level:3},{value:"Error Response (422 Unprocessable Entity)",id:"error-response-422-unprocessable-entity",level:3},{value:"2. Get All Nationalities",id:"2-get-all-nationalities",level:2},{value:"Success Response (200 OK)",id:"success-response-200-ok-1",level:3},{value:"3. Set Language Preference",id:"3-set-language-preference",level:2},{value:"Request Body",id:"request-body",level:3},{value:"Success Response (200 OK)",id:"success-response-200-ok-2",level:3},{value:"Code Highlights &amp; Key Concepts",id:"code-highlights--key-concepts",level:3}];function c(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"general-support",children:"General Support"})}),"\n",(0,i.jsx)(n.p,{children:"This document covers miscellaneous support endpoints for downloading forms, retrieving lists of nationalities, and managing user language preferences."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"flow-diagrams",children:"Flow Diagrams"}),"\n",(0,i.jsx)(n.h3,{id:"download-authorization-form",children:"Download Authorization Form"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TD;\r\n    A["User requests form"] --\x3e B{"GET /api/v1/authorization-form/download"};\r\n    B --\x3e C{"Fetch form file path from settings"};\r\n    C -- File exists --\x3e D["Return file as a download"];\r\n    C -- File does not exist --\x3e E["Return \'File not uploaded\' error"];'}),"\n",(0,i.jsx)(n.h3,{id:"get-nationalities",children:"Get Nationalities"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TD;\r\n    F["User requests nationalities"] --\x3e G{"GET /api/v1/nationalities"};\r\n    G --\x3e H["Fetch all records from \'nationalities\' table"];\r\n    H --\x3e I["Return collection of nationalities"];'}),"\n",(0,i.jsx)(n.h3,{id:"set-language-preference",children:"Set Language Preference"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TD;\r\n    J["Authenticated user sends new language code (e.g., \'ar\')"] --\x3e K{"POST /api/v1/preferences/language"};\r\n    K --\x3e L["Update \'locale\' column for the user in the database"];\r\n    L --\x3e M["Set the language for the current API session"];\r\n    M --\x3e N["Return success message"];'}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-download-authorization-form",children:"1. Download Authorization Form"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows any user to download the authorization form required for establishment providers."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"GET /api/v1/authorization-form/download"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Method:"})," ",(0,i.jsx)(n.code,{children:"GET"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authentication:"})," Not required"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"success-response-200-ok",children:"Success Response (200 OK)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Content-Type:"})," Varies (e.g., ",(0,i.jsx)(n.code,{children:"application/pdf"}),", ",(0,i.jsx)(n.code,{children:"image/png"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"The endpoint returns the authorization form file directly as a download."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-response-422-unprocessable-entity",children:"Error Response (422 Unprocessable Entity)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If no authorization form file has been uploaded by the admin in the settings panel."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-get-all-nationalities",children:"2. Get All Nationalities"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint retrieves a list of all available nationalities for use in registration and profile forms."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"GET /api/v1/nationalities"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Method:"})," ",(0,i.jsx)(n.code,{children:"GET"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authentication:"})," Not required"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"success-response-200-ok-1",children:"Success Response (200 OK)"}),"\n",(0,i.jsx)(n.p,{children:"Returns an array of nationality objects."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "message": "Data retrieved successfully.",\r\n    "data": [\r\n        {\r\n            "id": 1,\r\n            "name_ar": "\u0633\u0639\u0648\u062f\u064a",\r\n            "name_en": "Saudi",\r\n            "code": "SA"\r\n        },\r\n        {\r\n            "id": 2,\r\n            "name_ar": "\u0645\u0635\u0631\u064a",\r\n            "name_en": "Egyptian",\r\n            "code": "EG"\r\n        }\r\n    ]\r\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-set-language-preference",children:"3. Set Language Preference"}),"\n",(0,i.jsx)(n.p,{children:"Allows an authenticated user to set their preferred language for communications and display."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"POST /api/v1/preferences/language"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Method:"})," ",(0,i.jsx)(n.code,{children:"POST"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authentication:"})," Required (User Token)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Rules"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"locale"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Required, e.g., 'en', 'ar'."})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"success-response-200-ok-2",children:"Success Response (200 OK)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "message": "Locale has been set successfully."\r\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"code-highlights--key-concepts",children:"Code Highlights & Key Concepts"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Dynamic Settings (",(0,i.jsx)(n.code,{children:"DownloadAuthorizationFormAction"}),")"]}),": The authorization form is not a static file in the project. Its path is stored in the database via the ",(0,i.jsx)(n.code,{children:"laravel-settings"})," package. The ",(0,i.jsx)(n.code,{children:"DownloadAuthorizationFormAction"})," retrieves this setting and throws a clear error if the admin has not uploaded the file yet. This makes the form easily updatable by an admin without requiring a new code deployment."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Persistent and Session-wide Language (",(0,i.jsx)(n.code,{children:"SetLocaleAction"}),")"]}),": The ",(0,i.jsx)(n.code,{children:"SetLocaleAction"})," does two important things when a user changes their language:\r\na. ",(0,i.jsx)(n.strong,{children:"It persists the choice"}),": ",(0,i.jsx)(n.code,{children:"getAuthenticatable()->update(['locale' => ...])"})," saves the user's preference to the database, so it will be their default language in the future.\r\nb. ",(0,i.jsx)(n.strong,{children:"It applies immediately"}),": ",(0,i.jsx)(n.code,{children:"app()->setLocale(...)"})," changes the application's language for the ",(0,i.jsx)(n.em,{children:"current request/session"}),". This means any subsequent emails, notifications, or localized messages generated during this session will use the new language right away."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);