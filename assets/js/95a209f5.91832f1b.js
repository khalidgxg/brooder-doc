"use strict";(self.webpackChunkbrooder=self.webpackChunkbrooder||[]).push([[5206],{4610:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"workflows/shared/profile-management","title":"Profile Management","description":"The Profile Management workflow allows both Customers and Providers to manage their personal information. While most profile attributes are shared, Providers have some additional fields they can modify.","source":"@site/docs/workflows/shared/profile-management.md","sourceDirName":"workflows/shared","slug":"/workflows/shared/profile-management","permalink":"/brooder-doc/docs/workflows/shared/profile-management","draft":false,"unlisted":false,"editUrl":"https://github.com/khalidgxg/brooder/tree/main/docs/workflows/shared/profile-management.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Order Management","permalink":"/brooder-doc/docs/workflows/shared/orders-management"},"next":{"title":"Review Management","permalink":"/brooder-doc/docs/workflows/shared/reviews-management"}}');var i=s(4848),d=s(8453);const o={sidebar_position:1},l="Profile Management",t={},c=[{value:"Endpoints",id:"endpoints",level:2},{value:"Update Profile",id:"update-profile",level:3},{value:"Process Flow",id:"process-flow",level:2},{value:"Request Body",id:"request-body",level:2},{value:"Shared Fields (Customer &amp; Provider)",id:"shared-fields-customer--provider",level:3},{value:"Provider-Specific Fields",id:"provider-specific-fields",level:3},{value:"Responses",id:"responses",level:2},{value:"Success Response (<code>200 OK</code>)",id:"success-response-200-ok",level:3},{value:"Error Response (<code>422 Unprocessable Entity</code>)",id:"error-response-422-unprocessable-entity",level:3},{value:"Code Highlights &amp; Key Concepts",id:"code-highlights--key-concepts",level:2}];function a(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"profile-management",children:"Profile Management"})}),"\n",(0,i.jsx)(r.p,{children:"The Profile Management workflow allows both Customers and Providers to manage their personal information. While most profile attributes are shared, Providers have some additional fields they can modify."}),"\n",(0,i.jsx)(r.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsx)(r.h3,{id:"update-profile",children:"Update Profile"}),"\n",(0,i.jsx)(r.p,{children:"This endpoint allows users to update their profile information."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Endpoint:"})," ",(0,i.jsx)(r.code,{children:"PATCH /api/v1/profile"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Authorization:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Bearer Token (Customer)"}),"\n",(0,i.jsx)(r.li,{children:"Bearer Token (Provider)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Action:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"Customers\\Profile\\UpdateProfileController"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"Providers\\Profile\\UpdateProfileController"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"process-flow",children:"Process Flow"}),"\n",(0,i.jsx)(r.mermaid,{value:"graph TD\r\n    A[Start] --\x3e B{User Type};\r\n    B --\x3e C[Customer];\r\n    B --\x3e D[Provider];\r\n\r\n    C --\x3e E{Update Profile};\r\n    D --\x3e E;\r\n\r\n    E --\x3e F[Validate Input];\r\n    F --\x3e G{Validation Passed?};\r\n    G -- Yes --\x3e H[Update User Profile];\r\n    H --\x3e I[Return Updated User Resource];\r\n    I --\x3e J[End];\r\n\r\n    G -- No --\x3e K[Return Validation Errors];\r\n    K --\x3e J;"}),"\n",(0,i.jsx)(r.h2,{id:"request-body",children:"Request Body"}),"\n",(0,i.jsx)(r.h3,{id:"shared-fields-customer--provider",children:"Shared Fields (Customer & Provider)"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Field"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Rules"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"first_name"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"The user's first name."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required"}),", ",(0,i.jsx)(r.code,{children:"min:2"}),", ",(0,i.jsx)(r.code,{children:"max:50"}),", ",(0,i.jsx)(r.code,{children:"regex:/^[\\p{Arabic}A-Za-z ]+$/u"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"last_name"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"The user's last name."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required"}),", ",(0,i.jsx)(r.code,{children:"min:2"}),", ",(0,i.jsx)(r.code,{children:"max:50"}),", ",(0,i.jsx)(r.code,{children:"regex:/^[\\p{Arabic}A-Za-z ]+$/u"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"gender"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsxs)(r.td,{children:["The user's gender. Must be one of ",(0,i.jsx)(r.code,{children:"male"})," or ",(0,i.jsx)(r.code,{children:"female"}),"."]}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required"}),", ",(0,i.jsx)(r.code,{children:"in:male,female"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"avatar"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"file"})}),(0,i.jsx)(r.td,{children:"A new avatar image for the user."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"nullable"}),", ",(0,i.jsx)(r.code,{children:"mimes:png,jpg,jpeg"}),", ",(0,i.jsx)(r.code,{children:"max:2048KB"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"city_id"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"integer"})}),(0,i.jsx)(r.td,{children:"The ID of the user's city."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required"}),", ",(0,i.jsx)(r.code,{children:"exists:cities,id"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"nationality_id"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"integer"})}),(0,i.jsx)(r.td,{children:"The ID of the user's nationality."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required"}),", ",(0,i.jsx)(r.code,{children:"exists:nationalities,id"})]})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"provider-specific-fields",children:"Provider-Specific Fields"}),"\n",(0,i.jsx)(r.p,{children:"In addition to the shared fields, Providers can update the following:"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Field"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Rules"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"contact_email"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"The provider's contact email address."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required"}),", ",(0,i.jsx)(r.code,{children:"email"}),", ",(0,i.jsx)(r.code,{children:"unique:providers,contact_email"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"phone_country"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"The country code for the phone number."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required_with:phone"}),", ",(0,i.jsx)(r.code,{children:"exists:countries,code"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"phone"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"string"})}),(0,i.jsx)(r.td,{children:"The provider's phone number."}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.code,{children:"required"}),", ",(0,i.jsx)(r.code,{children:"regex:/^\\d+$/"}),", ",(0,i.jsx)(r.code,{children:"digits_between:8,15"}),", ",(0,i.jsx)(r.code,{children:"unique:users,phone"}),", ",(0,i.jsx)(r.code,{children:"phone"})]})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"responses",children:"Responses"}),"\n",(0,i.jsxs)(r.h3,{id:"success-response-200-ok",children:["Success Response (",(0,i.jsx)(r.code,{children:"200 OK"}),")"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\r\n    "status": "success",\r\n    "message": "Data has been updated successfully.",\r\n    "data": {\r\n        "id": 1,\r\n        "first_name": "John",\r\n        "last_name": "Doe",\r\n        "email": "john.doe@example.com",\r\n        "phone": "1234567890",\r\n        "avatar": "https://example.com/avatar.jpg",\r\n        // ... other user fields\r\n    }\r\n}\n'})}),"\n",(0,i.jsxs)(r.h3,{id:"error-response-422-unprocessable-entity",children:["Error Response (",(0,i.jsx)(r.code,{children:"422 Unprocessable Entity"}),")"]}),"\n",(0,i.jsx)(r.p,{children:"If validation fails, the response will contain the validation errors."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\r\n    "message": "The given data was invalid.",\r\n    "errors": {\r\n        "first_name": [\r\n            "The first name must be at least 2 characters."\r\n        ]\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(r.h2,{id:"code-highlights--key-concepts",children:"Code Highlights & Key Concepts"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Separate Controllers, Shared Logic:"})," While there are two distinct controllers (",(0,i.jsx)(r.code,{children:"Customers\\Profile\\UpdateProfileController"})," and ",(0,i.jsx)(r.code,{children:"Providers\\Profile\\UpdateProfileController"}),"), they both handle the core logic of updating a user's profile. This separation allows for customized validation and logic for each user type."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Form Requests for Validation:"})," Both controllers leverage Form Request classes (",(0,i.jsx)(r.code,{children:"UpdateProfileRequest"}),") to handle validation. This keeps the controllers clean and centralizes validation logic."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Provider-Specific Validation:"})," The ",(0,i.jsx)(r.code,{children:"Providers\\Profile\\UpdateProfileRequest"})," includes validation rules for fields that are unique to providers, such as ",(0,i.jsx)(r.code,{children:"contact_email"})," and ",(0,i.jsx)(r.code,{children:"phone"}),". This demonstrates how the system can enforce different data requirements for different user roles."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Action Classes:"})," The actual profile update logic is encapsulated within Action classes (",(0,i.jsx)(r.code,{children:"UpdateProfileAction"}),"). This is a good practice for separating business logic from the HTTP layer (controllers)."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"DTOs (Data Transfer Objects):"})," The validated request data is converted into a ",(0,i.jsx)(r.code,{children:"UpdateProfileData"})," DTO. This ensures that the action class receives a structured, predictable object to work with."]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"This concludes the documentation for the shared Profile Management workflow."})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>o,x:()=>l});var n=s(6540);const i={},d=n.createContext(i);function o(e){const r=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(d.Provider,{value:r},e.children)}}}]);